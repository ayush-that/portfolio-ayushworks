---
title: "Pythonの解剖学"
description: ソースコードの作成からCPU実行まで、Pythonの内部動作を発見する。より深い洞察を求める開発者のための包括的なガイド
tags: ["python"]
date: 2024-05-17
published: true
cover: "./images/cover/the-anatomy-of-python.avif"
---

Pythonは私の最初のプログラミング言語でした。そのシンプルさと汎用性で知られる人気のオブジェクト指向言語です。インタプリタ言語として、Pythonはコード全体を一度にマシン言語にコンパイルするのではなく、インタプリタを使用してコードを行ごとに実行します。

この記事では、ソースコードの作成から実行まで、Pythonの内部動作を探ります。これらの段階を理解することで、開発者はプログラミング言語としてのPythonの効率性とパワーを理解できます。

## 知っておくべき基本用語

Pythonの動作に入る前に、いくつかの基本用語を理解しましょう：

### **コードエディタ**

これはソースコードが書かれる環境です。Pythonプログラムの出発点で、開発者が人間が読める形式で命令を書きます。

### **ソースコード**

コードエディタで書かれ、`.py`ファイルとして保存された人間が読める命令。このファイルにはPythonコンパイラが処理するコードが含まれています。

### **コンパイル段階**

この段階では、Pythonコンパイラがソースコードをバイトコードに変換し、途中で構文エラーをチェックします。エラーが見つからなければ、バイトコードを含む`.pyc`ファイルが生成されます。

### **Python仮想マシン（PVM）**

PVMはPythonのコアランタイムエンジンです。バイトコードを解釈し、CPUが実行できるマシンコードに変換します。PVMはPythonインタプリタを持つすべてのマシンでPythonコードを実行できることを保証し、Pythonを高度にポータブルにします。

### **実行中のプログラム**

マシンコードが生成されると、CPUがそれを実行し、プログラムは元のPythonスクリプトで指定されたタスクと計算を実行します。

## Pythonの実行プロセス

Pythonコードは、コンピュータのCPUによって実行される前にいくつかの段階を経ます。Pythonコードが実行可能コードに変換される方法のステップバイステップの説明：

![コードエディタ](https://cdn.hashnode.com/res/hashnode/image/upload/v1715955234708/e46fbbb2-e325-4197-ae40-7511d6bfebb9.png)

1. ### ソースコードの作成

   ![](https://live.staticflickr.com/4836/44661017890_eb4f288ffe_b.jpg)

   Pythonプログラムの最初のステップは、コードエディタでソースコードを書くことです。これはPythonの構文規則に従って書かれた人間が読めるコードです。書かれたソースコードは`.py`ファイルとして保存されます。

2. ### バイトコードへのコンパイル

   ![](https://prepinstadotcom.s3.ap-south-1.amazonaws.com/wp-content/uploads/2020/07/Pythonbyte.webp)

   .pyファイルが実行されると、Pythonコンパイラはまずソースコードを読み取ります。この段階で、コンパイラは構文エラーをチェックします。エラーが見つからなければ、コンパイラはソースコードをバイトコードに変換し、.pycファイルが生成されます。マシンコードとは異なり、バイトコードはCPUによって直接実行できませんが、中間表現として機能します。

3. ### **Python仮想マシン（PVM）による解釈**

   バイトコードはPython仮想マシン（PVM）に送られます。PVMはバイトコードを読み取り、マシン実行可能コードに変換するインタプリタです。この変換は行ごとに行われ、PVMはバイトコードの各行を順番に解釈して実行します。

4. ### CPUによる実行

   最後に、PVMによって生成されたマシンコードはCPUによって実行されます。バイナリコードのみを理解するCPUは、元のPythonプログラムで指定されたタスクと計算を実行し、望ましい出力を生成します。

## まとめ

![](https://www.devopsschool.com/blog/wp-content/uploads/2020/08/python-virtual-machine.png)

Pythonの内部動作には、ソースコードがバイトコードにコンパイルされ、PVMによって解釈され、最終的にCPUによってマシンコードとして実行される多段階のプロセスが含まれています。

詳細については、[https://www.geeksforgeeks.org/internal-working-of-python/](https://www.geeksforgeeks.org/internal-working-of-python/)を参照するか、Hitesh Chaudhary（Chai aur Code）による以下のYouTubeビデオをご覧ください。

<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/3HTKc-ZgZbg?si=-I9mzcFKF-TiugI5"
  title="YouTube video player"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  referrerpolicy="strict-origin-when-cross-origin"
  allowfullscreen
></iframe>
