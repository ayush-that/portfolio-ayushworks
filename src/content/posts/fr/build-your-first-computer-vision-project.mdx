---
title: "Construisez votre Premier Projet de Vision par Ordinateur"
description: Créez un jeu de ping-pong solo en utilisant Python, OpenCV et la détection des mains. Guide étape par étape inclus. Parfait pour les débutants en vision par ordinateur
tags: ["computer-vision", "python", "opencv"]
date: 2024-07-13
published: true
cover: "./images/cover/build-your-first-computer-vision-project.avif"
---

Avez-vous déjà voulu jouer au ping-pong mais n'aviez pas de partenaire ? Eh bien, avec un peu de code et de [vision par ordinateur](https://en.wikipedia.org/wiki/Computer_vision), vous pouvez créer un jeu de [ping-pong](https://en.wikipedia.org/wiki/Table_tennis) solo qui vous permet de jouer contre vous-même !

Dans cet article de blog, je vous guiderai étape par étape sur la façon de créer ce jeu en utilisant Python, [OpenCV](https://opencv.org/) et un module de détection des mains.

## Démo SoloPong

Pour voir le jeu de ping-pong solo en action, regardez la vidéo de démonstration ci-dessous. Observez comment je joue en utilisant des gestes de mains détectés par la webcam.

<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/4_GEyFlE7M0?si=lV-2RyX04tJkmqgK"
  title="YouTube video player"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  referrerpolicy="strict-origin-when-cross-origin"
  allowfullscreen
></iframe>
GitHub - [https://github.com/ayush-that/SoloPong](https://github.com/ayush-that/SoloPong)

## Ce dont vous aurez besoin

- [Python](https://www.python.org/downloads/) installé sur votre ordinateur
- Une webcam
- Quelques ressources d'image pour le jeu (balle, raquettes, arrière-plan et écran de fin de partie) depuis le dépôt [GitHub](https://github.com/ayush-that/SoloPong)

  ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1720892343515/26fd1a83-f262-4f47-baad-793403574a9b.png)

## Écrire le Code

1. **Importer les Bibliothèques et Configurer la Caméra**

```python
import numpy as np
import cv2 as cv
import cvzone
from cvzone.HandTrackingModule import HandDetector

cap = cv.VideoCapture(0)
cap.set(3, 1280)
cap.set(4, 720)
```

Nous commençons par importer les bibliothèques nécessaires. Nous utilisons OpenCV (`cv`) pour le traitement d'image, `cvzone` pour la détection des mains, et [NumPy](https://numpy.org/doc/stable/) (`np`) pour les opérations numériques. Nous configurons ensuite la webcam avec une résolution de 1280x720.

2. **Charger les Ressources d'Image**

```python
imgBg = cv.imread("assets/bg.png")
imgGO = cv.imread("assets/gameover.png")
imgBall = cv.imread("assets/ball.png", cv.IMREAD_UNCHANGED)
imgBat1 = cv.imread("assets/bat1.png", cv.IMREAD_UNCHANGED)
imgBat2 = cv.imread("assets/bat2.png", cv.IMREAD_UNCHANGED)
```

Nous chargeons les images pour l'arrière-plan, l'écran de fin de partie, la balle et les raquettes. Assurez-vous d'avoir ces images dans le dossier assets.

3. **Configurer le Détecteur de Mains**

```python
detector = HandDetector(detectionCon=0.8, maxHands=2)
```

Nous initialisons le détecteur de mains avec une confiance de détection de 0.8 et lui permettons de détecter jusqu'à 2 mains.

4. **Initialiser les Variables du Jeu**

```python
ballPos = [100, 100]
speedX = 25
speedY = 25
gameOver = False
score = [0, 0]
```

Nous définissons la position initiale de la balle et sa vitesse. Nous initialisons également le drapeau de fin de partie et le score.

5. **Boucle Principale du Jeu**

```python
while True:
    _, img = cap.read()
    img = cv.flip(img, 1)
    imgRaw = img.copy()
```

Nous entrons dans la boucle principale du jeu, lisons l'image de la webcam et la retournons horizontalement pour un effet miroir. Nous faisons également une copie de l'image originale.

6. **Détection des Mains et Superposition des Raquettes**

```python
hands, img = detector.findHands(img, flipType=False)
img = cv.addWeighted(img, 0.1, imgBg, 0.9, 0)

if hands:
    for hand in hands:
        x, y, w, h = hand["bbox"]
        h1, w1, _ = imgBat1.shape
        y1 = y - h1 // 2
        y1 = np.clip(y1, 20, 415)

        if hand["type"] == "Left":
            img = cvzone.overlayPNG(img, imgBat1, (59, y1))
            if 59 < ballPos[0] < 59 + w1 and y1 < ballPos[1] < y1 + h1:
                speedX = -speedX
                ballPos[0] += 30
                score[0] += 1

        if hand["type"] == "Right":
            img = cvzone.overlayPNG(img, imgBat2, (1195, y1))
            if 1195 - 50 < ballPos[0] < 1195 and y1 < ballPos[1] < y1 + h1:
                speedX = -speedX
                ballPos[0] -= 30
                score[1] += 1
```

Nous détectons les mains dans l'image et superposons les raquettes en fonction des positions des mains. Si la balle frappe une raquette, sa direction change et le score est mis à jour.

7. **Mouvement de la Balle et Détection des Collisions**

```python
if ballPos[0] < 40 or ballPos[0] > 1200:
    gameOver = True
if gameOver:
    img = imgGO
    cv.putText(
        img,
        str(score[1] + score[0]).zfill(2),
        (585, 360),
        cv.FONT_HERSHEY_COMPLEX,
        2.5,
        (200, 0, 200),
        5,
    )

else:
    if ballPos[1] >= 500 or ballPos[1] <= 10:
        speedY = -speedY

    ballPos[0] += speedX
    ballPos[1] += speedY

    img = cvzone.overlayPNG(img, imgBall, ballPos)
    cv.putText(
        img,
        str(score[0]),
        (300, 650),
        cv.FONT_HERSHEY_COMPLEX,
        3,
        (255, 255, 255),
        5,
    )
    cv.putText(
        img,
        str(score[1]),
        (900, 650),
        cv.FONT_HERSHEY_COMPLEX,
        3,
        (255, 255, 255),
        5,
    )
```

Nous mettons à jour la position de la balle et vérifions les collisions avec les bords de l'écran. Si la balle sort des limites, le jeu se termine. Sinon, nous continuons à mettre à jour la position de la balle et la superposons sur l'image.

8. **Afficher le Jeu**

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1720892600594/523b8490-cba7-45c6-b6cd-3b516b3ff6dc.png)

```python
img[580:700, 20:233] = cv.resize(imgRaw, (213, 120))
cv.imshow("Image", img)
key = cv.waitKey(1)
if key == ord("r"):
    ballPos = [100, 100]
    speedX = 25
    speedY = 25
    gameOver = False
    score = [0, 0]
    imgGO = cv.imread("assets/gameover.png")
```

Nous affichons l'image du jeu et gérons l'appui sur la touche "R" pour réinitialiser le jeu.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1720892568086/67aa413b-01c6-4c90-b153-2239c04e13ef.png)

Merci d'avoir suivi ! Amusez-vous bien à construire et jouer à votre propre jeu de ping-pong solo. Si vous avez des questions ou rencontrez des problèmes, n'hésitez pas à laisser un commentaire ci-dessous.
